export DOTFILES="$(dirname "$(dirname "$(readlink "$HOME/.zshrc")")")"

# Any configurations that you want to add should be placed in your dotrc file
# Either in $DOTFILES/dotrc or in $HOME/.dotrc
# Note: $DOTFILES/dotrc will always be loaded, but $HOME/.dotrc will override it

# Load the settings
if ! [[ -e "$HOME/.dotrc" || -e "$DOTFILES/dotrc" ]]; then
        echo "No configuration found"
        "$DOTFILES/configure.sh"
fi
if [ -e "$DOTFILES/dotrc" ]; then
        source "$DOTFILES/dotrc"
fi
if [ -e "$HOME/.dotrc" ]; then
        source "$HOME/.dotrc"
fi

# If you come from bash you might have to change your $PATH.
export PATH=$HOME/bin:$HOME/.local/bin:/usr/local/bin:$DOTFILES/bin:$PATH

# Path to your oh-my-zsh installation.
export ZSH="$DOTFILES/zsh/oh-my-zsh/"
ZSH_CUSTOM="$DOTFILES/zsh/custom"

# https://askubuntu.com/questions/466198/how-do-i-change-the-color-for-directories-with-ls-in-the-console
LS_COLORS="di=1;34:ex=4;32:fi=0;37:ln=1;35:ow=0;36:"
export LS_COLORS

source $ZSH/oh-my-zsh.sh

source $DOTFILES/zsh/aliases.sh

if [ -f $HOME/.bash_aliases ]; then
        source $HOME/.bash_aliases
fi

get_date() {
        date --utc --date="$1" +"%Y-%m-%d %H:%M:%S"
}

# Keep Dotfiles up to date
LAST_DOT_UPDATE=$(cat $DOTFILES/.lastupdate 2> /dev/null)
if [[ $CONFIG_DOT_UPDATE == "YES" && "$(get_date '-10 days')" > "$LAST_DOT_UPDATE" ]]; then
        # echo "Checking for dotfiles update.."
        echo "$(get_date)" > $DOTFILES/.lastupdate
        $DOTFILES/update.sh
fi
